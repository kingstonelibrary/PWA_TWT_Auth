<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Hello Firebase Auth</title>
</head>
<body>
  <h1>...Please wait</h1>
  <div id="info"></div>

  <script src="https://www.gstatic.com/firebasejs/5.8.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/5.8.1/firebase-auth.js"></script>
  <!-- <script src="/js/config.js"></script> -->
  <script>
    var config = {
      apiKey: "AIzaSyCAQ_TOCtBTXel87hCCRdXy-L4eUPt1UFg",
      authDomain: "gcmproject-141802.firebaseapp.com",
    };
    firebase.initializeApp(config);
    
    // 存在確認済のメールアドレスかどうか(true or false)
    var verified = firebase.auth().currentUser.emailVerified;
    console.log('verified:' +verified);

    // 未確認のメールアドレスの場合、メールを送信する
    if (!verified) {
        // メール送信処理
        firebase.auth().currentUser.sendEmailVerification();

        var email = firebase.auth().currentUser.email;
        alert('確認メールを送信しました。', email);
    }

    // firebase.auth().onAuthStateChanged( (user) => {
    //   let h1   = document.querySelector('h1');
    //   let info = document.querySelector('#info');

    //   if(user) {
    //     h1.innerText   = 'Login Complete!';
    //     info.innerHTML =   `${user.displayName}さんがログインしました`
    //                      + '<ul>'
    //                      +   `<li>${user.email}</li>`
    //                      +   `<li>${user.emailVerified}</li>`
    //                      + '<ul>';
    //     console.log(user);
    //   }
    //   else {
    //     h1.innerText = 'Not Login';
    //   }
    // });
  </script>
</body>
</html>